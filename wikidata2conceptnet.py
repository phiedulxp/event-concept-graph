import requests

retain_property = ['P31', 'P248', 'P1433', 'P143', 'P17', 'P131', 'P21', 'P106', 'P27', 'P735', 'P105', 'P171', 'P2860', 'P407', 'P50', 'P19', 'P1435', 'P421', 'P921', 'P279', 'P703', 'P361', 'P641', 'P276', 'P495', 'P20', 'P69', 'P1412', 'P136', 'P734', 'P971', 'P459', 'P2548', 'P301', 'P702', 'P910', 'P688', 'P1057', 'P527', 'P155', 'P156', 'P405', 'P195', 'P170', 'P39', 'P1640', 'P166', 'P186', 'P1264', 'P54', 'P680', 'P682', 'P1013', 'P175', 'P123', 'P1889', 'P413', 'P282', 'P102', 'P681', 'P518', 'P364', 'P57', 'P1343', 'P642', 'P937', 'P264', 'P159', 'P360', 'P108', 'P1344', 'P161', 'P463', 'P138', 'P462', 'P2868', 'P22', 'P3452', 'P127', 'P607', 'P47', 'P40', 'P86', 'P58', 'P119', 'P179', 'P196', 'P137', 'P4224', 'P141', 'P26', 'P162', 'P805', 'P684', 'P3373', 'P150', 'P566', 'P2348', 'P291', 'P140', 'P101', 'P103', 'P180', 'P36', 'P403', 'P972', 'P749', 'P669', 'P512', 'P344', 'P61', 'P859', 'P2817', 'P768', 'P5138', 'P241', 'P172', 'P460', 'P551', 'P1196', 'P272', 'P176', 'P1303', 'P410', 'P1366', 'P793', 'P449', 'P1001', 'P708', 'P81', 'P197', 'P1376', 'P65', 'P1365', 'P30', 'P3450', 'P149', 'P4614', 'P2094', 'P135', 'P59', 'P750', 'P1642', 'P4552', 'P509', 'P2937', 'P25', 'P659', 'P16', 'P1480', 'P2715', 'P366', 'P4908', 'P1269', 'P126', 'P84', 'P1040', 'P118', 'P1454', 'P2061', 'P1853', 'P275', 'P178', 'P53', 'P400', 'P1441', 'P840', 'P740', 'P1464', 'P5166', 'P710', 'P206', 'P1346', 'P800', 'P112', 'P452', 'P1268', 'P404', 'P559', 'P3602', 'P706', 'P1411', 'P144', 'P814', 'P1792', 'P1532', 'P2701', 'P2959', 'P915', 'P6', 'P609', 'P183', 'P205', 'P1981', 'P4100', 'P485', 'P2416', 'P184', 'P466', 'P190', 'P1080', 'P2597', 'P560', 'P3876', 'P3831', 'P2079', 'P1313', 'P1064', 'P2789', 'P1066', 'P423', 'P115', 'P355', 'P1427', 'P664', 'P128', 'P437', 'P1534', 'P1071', 'P1686', 'P611', 'P1465', 'P1552', 'P2962', 'P5008', 'P647', 'P676', 'P1416', 'P629', 'P3096', 'P412', 'P5051', 'P5236', 'P177', 'P1533', 'P697', 'P1753', 'P2554', 'P97', 'P931', 'P427', 'P2670', 'P1754', 'P3018', 'P991', 'P289', 'P98', 'P1038', 'P825', 'P3432', 'P1039', 'P1950', 'P417', 'P5130', 'P887', 'P376', 'P5021', 'P461', 'P1142', 'P1877', 'P812', 'P414', 'P1403', 'P1456', 'P1923', 'P1192', 'P287', 'P1716', 'P1444', 'P2241', 'P1423', 'P541', 'P1424', 'P1027', 'P4002', 'P3643', 'P4202', 'P516', 'P371', 'P802', 'P1995', 'P2894', 'P286', 'P479', 'P1598', 'P306', 'P453', 'P974', 'P1056', 'P375', 'P1652', 'P1145', 'P1050', 'P2747', 'P411', 'P488', 'P2978', 'P579', 'P655', 'P1408', 'P2378', 'P674', 'P747', 'P1383', 'P277', 'P201', 'P945', 'P37', 'P1431', 'P451', 'P2302', 'P556', 'P1855', 'P4628', 'P2515', 'P598', 'P1420', 'P1399', 'P358', 'P110', 'P3578', 'P608', 'P2571', 'P2354', 'P2358', 'P828', 'P2453', 'P200', 'P1811', 'P737', 'P790', 'P1382', 'P3912', 'P2632', 'P816', 'P817', 'P885', 'P1629', 'P852', 'P2695', 'P1028', 'P1791', 'P610', 'P870', 'P237', 'P87', 'P3022', 'P4101', 'P3274', 'P1591', 'P2922', 'P2363', 'P467', 'P2308', 'P2309', 'P2359', 'P1884', 'P2643', 'P5025', 'P3716', 'P930', 'P2316', 'P1389', 'P425', 'P678', 'P547', 'P908', 'P4000', 'P121', 'P2541', 'P1327', 'P1547', 'P826', 'P1340', 'P725', 'P736', 'P2321', 'P408', 'P163', 'P1037', 'P3781', 'P2517', 'P2596', 'P113', 'P1200', 'P2684', 'P1875', 'P2283', 'P129', 'P3764', 'P1560', 'P1706', 'P726', 'P3137', 'P3610', 'P504', 'P548', 'P1462', 'P3650', 'P741', 'P4661', 'P4792', 'P88', 'P1750', 'P3014', 'P654', 'P4195', 'P3279', 'P636', 'P3306', 'P2875', 'P194', 'P4794', 'P189', 'P1434', 'P397', 'P3858', 'P739', 'P2743', 'P2293', 'P2389', 'P5102', 'P169', 'P1891', 'P1542', 'P4390', 'P511', 'P520', 'P2388', 'P4312', 'P914', 'P3433', 'P185', 'P2564', 'P2175', 'P2305', 'P941', 'P2700', 'P1354', 'P1879', 'P469', 'P2614', 'P1204', 'P765', 'P1321', 'P2417', 'P1885', 'P2505', 'P3919', 'P3402', 'P5105', 'P1151', 'P1535', 'P2912', 'P1830', 'P853', 'P841', 'P4647', 'P38', 'P4680', 'P2936', 'P2408', 'P5053', 'P4900', 'P2545', 'P767', 'P3780', 'P4132', 'P748', 'P2522', 'P2842', 'P111', 'P1387', 'P4952', 'P689', 'P1740', 'P1308', 'P505', 'P2650', 'P912', 'P690', 'P797', 'P157', 'P91', 'P122', 'P3871', 'P837', 'P1657', 'P483', 'P4510', 'P803', 'P2758', 'P3489', 'P552', 'P3834', 'P1414', 'P2184', 'P780', 'P2377', 'P1049', 'P770', 'P1773', 'P263', 'P783', 'P788', 'P927', 'P470', 'P1596', 'P1639', 'P2567', 'P2210', 'P193', 'P785', 'P1026', 'P2033', 'P532', 'P4044', 'P398', 'P3216', 'P4329', 'P833', 'P1299', 'P784', 'P35', 'P631', 'P2176', 'P1774', 'P553', 'P1576', 'P2579', 'P92', 'P208', 'P658', 'P4608', 'P787', 'P2239', 'P1029', 'P2563', 'P2633', 'P880', 'P1336', 'P3095', 'P1011', 'P944', 'P2012', 'P5277', 'P5280', 'P534', 'P5125', 'P786', 'P3300', 'P4913', 'P1074', 'P85', 'P2303', 'P2578', 'P1312', 'P2341', 'P789', 'P1654', 'P2756', 'P4873', 'P1347', 'P2438', 'P450', 'P1582', 'P3815', 'P3342', 'P1419', 'P1777', 'P1672', 'P1002', 'P1962', 'P3005', 'P1302', 'P1072', 'P823', 'P447', 'P2429', 'P3150', 'P2846', 'P3966', 'P618', 'P1012', 'P3501', 'P522', 'P3301', 'P3975', 'P795', 'P533', 'P2629', 'P1478', 'P2667', 'P1809', 'P406', 'P1557', 'P1876', 'P2882', 'P5054', 'P2499', 'P3354', 'P1201', 'P3680', 'P66', 'P415', 'P457', 'P1283', 'P1046', 'P872', 'P167', 'P2992', 'P4271', 'P720', 'P1075', 'P3195', 'P1589', 'P2178', 'P1881', 'P1546', 'P3428', 'P1906', 'P3730', 'P3729', 'P1158', 'P1432', 'P2500', 'P4241', 'P807', 'P588', 'P1322', 'P3494', 'P562', 'P3497', 'P3092', 'P694', 'P78', 'P1731', 'P1455', 'P199', 'P3818', 'P4634', 'P3259', 'P3592', 'P114', 'P751', 'P1531', 'P1135', 'P530', 'P2637', 'P822', 'P2848', 'P3320', 'P612', 'P3448', 'P542', 'P1310', 'P1073', 'P4791', 'P589', 'P3822', 'P4586', 'P2679', 'P1398', 'P2853', 'P1622', 'P2852', 'P3032', 'P1990', 'P881', 'P3091', 'P3174', 'P942', 'P2286', 'P501', 'P3734', 'P2881', 'P3085', 'P3931', 'P3261', 'P134', 'P2872', 'P3938', 'P4353', 'P1817', 'P1678', 'P1775', 'P3173', 'P1611', 'P2462', 'P831', 'P624', 'P3989', 'P1165', 'P3294', 'P1840', 'P1595', 'P1574', 'P515', 'P744', 'P2155', 'P2673', 'P2738', 'P1479', 'P4446', 'P567', 'P2674', 'P568', 'P634', 'P2360', 'P4320', 'P468', 'P5059', 'P1779', 'P2361', 'P2668', 'P2384', 'P2827', 'P943', 'P3310', 'P3828', 'P4323', 'P2925', 'P3189', 'P1290', 'P2512', 'P3403', 'P1999', 'P4884', 'P2502', 'P209', 'P3438', 'P1445', 'P1637', 'P1018', 'P2546', 'P5152', 'P4810', 'P4584', 'P5150', 'P1594', 'P2379', 'P4424', 'P4428', 'P2433', 'P2652', 'P523', 'P3263', 'P3355', 'P517', 'P1429', 'P531', 'P4743', 'P769', 'P2365', 'P3033', 'P832', 'P2058', 'P4675', 'P4875', 'P2869', 'P3833', 'P2098']

def get_concept(concept):
  return '/'+concept['language']+'/'+'_'.join(concept['value'].lower().split())

def get_concept_from_id(cid):
  res = requests.get(f'https://www.wikidata.org/wiki/Special:EntityData/{cid}.json').json()['entities'][f'{cid}']
  pq_id = res['id']
  cn_triples = []
  pq_map = {}
  pq_map.update({pq_id:get_concept(res['labels']['en'])})
  cn_triples.append((pq_id,'/r/wd/Synonym',get_concept(res['labels']['zh'])))
  cn_triples.append((pq_id,'/r/wd/descriptions',get_concept(res['descriptions']['en'])))
  cn_triples.append((pq_id,'/r/wd/descriptions',get_concept(res['descriptions']['zh'])))
  for i in res['aliases']['en']:
    cn_triples.append((pq_id,'/r/wd/Synonym',get_concept(i)))
  for i in res['aliases']['zh']:
    cn_triples.append((pq_id,'/r/wd/Synonym',get_concept(i)))

  triples = []
  for k,v in res['claims'].items():
    claim_len = len(v)
    for i in range(claim_len):
      if v[i]['mainsnak']['property'] in retain_property and v[i]['mainsnak']['datavalue']['type'] ==   'wikibase-entityid':
        triples.append((pq_id,k,v[i]['mainsnak']['datavalue']['value']['id']))
        print((pq_id,k,v[i]['mainsnak']['datavalue']['value']['id']))
  return pq_map,cn_triples,triples
      
if __name__ == '__main__':
  pq_map,cn_triples,triples = get_concept_from_id('Q42')
  import pdb
  pdb.set_trace()